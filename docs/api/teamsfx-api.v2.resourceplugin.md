<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@microsoft/teamsfx-api](./teamsfx-api.md) &gt; [v2](./teamsfx-api.v2.md) &gt; [ResourcePlugin](./teamsfx-api.v2.resourceplugin.md)

## v2.ResourcePlugin interface

Interface for ResourcePlugins. a ResourcePlugin can hook into Toolkit's lifecycles by implementing the corresponding API. Implementation of all lifecycles is expected to be idempotent. The return values and observable side effects of each lifecycle are expected to be the same with the same input.

All lifecycles follow the same pattern of returning a Promise<!-- -->&lt;<!-- -->Result<!-- -->&lt;<!-- -->T, FxError<!-- -->&gt;<!-- -->&gt;<!-- -->. Please return [UserError](./teamsfx-api.usererror.md) or [SystemError](./teamsfx-api.systemerror.md) when error happens instead of throwing.

<b>Signature:</b>

```typescript
export interface ResourcePlugin 
```

## Properties

|  Property | Type | Description |
|  --- | --- | --- |
|  [checkPermission?](./teamsfx-api.v2.resourceplugin.checkpermission.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: InputsWithProjectPath, envInfo: DeepReadonly&lt;EnvInfoV2&gt;, tokenProvider: [TokenProvider](./teamsfx-api.tokenprovider.md)<!-- -->, userInfo: [Json](./teamsfx-api.json.md)<!-- -->) =&gt; Promise&lt;Result&lt;[Json](./teamsfx-api.json.md)<!-- -->, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> |
|  [configureLocalResource?](./teamsfx-api.v2.resourceplugin.configurelocalresource.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: [Inputs](./teamsfx-api.inputs.md)<!-- -->, localSettings: [Json](./teamsfx-api.json.md)<!-- -->, tokenProvider: [TokenProvider](./teamsfx-api.tokenprovider.md)<!-- -->) =&gt; Promise&lt;Result&lt;[Void](./teamsfx-api.void.md)<!-- -->, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> configureLocalResource works like  but only for local debugging resources. Plugins are expected to read the local provision output values of other plugins, and modify in-place |
|  [configureResource?](./teamsfx-api.v2.resourceplugin.configureresource.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: ProvisionInputs, envInfo: DeepReadonly&lt;EnvInfoV2&gt;, tokenProvider: [TokenProvider](./teamsfx-api.tokenprovider.md)<!-- -->) =&gt; Promise&lt;Result&lt;ResourceProvisionOutput, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> configureResource() is guaranteed to run after Bicep/ARM provision. Plugins are expected to read the provision output of other plugins via envInfo's state, and return a new copy of its own provision output possibly with added and modified fields.<!-- -->Plugins can also sync their settings to the clould using access tokens provided by TokenProvider |
|  [deploy?](./teamsfx-api.v2.resourceplugin.deploy.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: DeploymentInputs, provisionOutputs: [Json](./teamsfx-api.json.md)<!-- -->, tokenProvider: [AzureAccountProvider](./teamsfx-api.azureaccountprovider.md)<!-- -->) =&gt; Promise&lt;Result&lt;[Void](./teamsfx-api.void.md)<!-- -->, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> Depends on the provision output values returned by , ARM/Bicep provision and . Plugins are expected to deploy code to cloud using access tokens provided by [AzureAccountProvider](./teamsfx-api.azureaccountprovider.md)<!-- -->. |
|  [displayName](./teamsfx-api.v2.resourceplugin.displayname.md) | string |  |
|  [executeUserTask?](./teamsfx-api.v2.resourceplugin.executeusertask.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: [Inputs](./teamsfx-api.inputs.md)<!-- -->, func: [Func](./teamsfx-api.func.md)<!-- -->, localSettings: [Json](./teamsfx-api.json.md)<!-- -->, envInfo: EnvInfoV2, tokenProvider: [TokenProvider](./teamsfx-api.tokenprovider.md)<!-- -->) =&gt; Promise&lt;Result&lt;unknown, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> |
|  [generateResourceTemplate?](./teamsfx-api.v2.resourceplugin.generateresourcetemplate.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: [Inputs](./teamsfx-api.inputs.md)<!-- -->) =&gt; Promise&lt;Result&lt;[ResourceTemplate](./teamsfx-api.resourcetemplate.md)<!-- -->, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> This method is called when creating a new project or adding a new resource. A resource plugin is expected to return a resource template(e.g. Bicep templates/plain JSON) which will be persisted by the Toolkit and will be used to provision resource when Provision command is called. |
|  [getQuestions?](./teamsfx-api.v2.resourceplugin.getquestions.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: [Inputs](./teamsfx-api.inputs.md)<!-- -->, envInfo: DeepReadonly&lt;EnvInfoV2&gt;, tokenProvider: [TokenProvider](./teamsfx-api.tokenprovider.md)<!-- -->) =&gt; Promise&lt;Result&lt;[QTreeNode](./teamsfx-api.qtreenode.md) \| undefined, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> |
|  [getQuestionsForScaffolding?](./teamsfx-api.v2.resourceplugin.getquestionsforscaffolding.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: [Inputs](./teamsfx-api.inputs.md)<!-- -->) =&gt; Promise&lt;Result&lt;[QTreeNode](./teamsfx-api.qtreenode.md) \| undefined, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> Plugins that need to collect user input are expected to implement this method. Questions are organized as a tree. Please see [QTreeNode](./teamsfx-api.qtreenode.md)<!-- -->.<!-- -->getQuestionsForScaffolding() is guaranteed to be called before scaffoldSourceCode(). |
|  [getQuestionsForUserTask?](./teamsfx-api.v2.resourceplugin.getquestionsforusertask.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: [Inputs](./teamsfx-api.inputs.md)<!-- -->, func: [Func](./teamsfx-api.func.md)<!-- -->, envInfo: DeepReadonly&lt;EnvInfoV2&gt;, tokenProvider: [TokenProvider](./teamsfx-api.tokenprovider.md)<!-- -->) =&gt; Promise&lt;Result&lt;[QTreeNode](./teamsfx-api.qtreenode.md) \| undefined, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> |
|  [grantPermission?](./teamsfx-api.v2.resourceplugin.grantpermission.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: InputsWithProjectPath, envInfo: DeepReadonly&lt;EnvInfoV2&gt;, tokenProvider: [TokenProvider](./teamsfx-api.tokenprovider.md)<!-- -->, userInfo: [Json](./teamsfx-api.json.md)<!-- -->) =&gt; Promise&lt;Result&lt;[Json](./teamsfx-api.json.md)<!-- -->, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> For grant and check permission in remote collaboration |
|  [listCollaborator?](./teamsfx-api.v2.resourceplugin.listcollaborator.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: InputsWithProjectPath, envInfo: DeepReadonly&lt;EnvInfoV2&gt;, tokenProvider: [TokenProvider](./teamsfx-api.tokenprovider.md)<!-- -->, userInfo: [Json](./teamsfx-api.json.md)<!-- -->) =&gt; Promise&lt;Result&lt;[Json](./teamsfx-api.json.md)<!-- -->, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> |
|  [name](./teamsfx-api.v2.resourceplugin.name.md) | string |  |
|  [provisionLocalResource?](./teamsfx-api.v2.resourceplugin.provisionlocalresource.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: [Inputs](./teamsfx-api.inputs.md)<!-- -->, localSettings: [Json](./teamsfx-api.json.md)<!-- -->, tokenProvider: [TokenProvider](./teamsfx-api.tokenprovider.md)<!-- -->) =&gt; Promise&lt;Result&lt;[Void](./teamsfx-api.void.md)<!-- -->, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> provisionLocalResource is a special lifecycle, called when users press F5 in vscode. It works like provision, but only creates necessary cloud resources for local debugging like AAD and AppStudio App. |
|  [provisionResource?](./teamsfx-api.v2.resourceplugin.provisionresource.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: ProvisionInputs, envInfo: DeepReadonly&lt;EnvInfoV2&gt;, tokenProvider: [TokenProvider](./teamsfx-api.tokenprovider.md)<!-- -->) =&gt; Promise&lt;Result&lt;ResourceProvisionOutput, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> provisionResource() runs before ARM/Bicep provision when Provision command is called. There are two reasons why a resource needs to implement this method: 1) to generate input for ARM/Bicep provision to consume. 2) the resource can't be provisioned using resource templates like ARM/Bicep. Two typical resources that need to implement this method are AAD(Azure Active Directory) and AppSudio, which statisfy both above criteria.<!-- -->A plugin can get access tokens to cloud service using TokenProvider. |
|  [publishApplication?](./teamsfx-api.v2.resourceplugin.publishapplication.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: [Inputs](./teamsfx-api.inputs.md)<!-- -->, envInfo: DeepReadonly&lt;EnvInfoV2&gt;, tokenProvider: [AppStudioTokenProvider](./teamsfx-api.appstudiotokenprovider.md)<!-- -->) =&gt; Promise&lt;Result&lt;[Void](./teamsfx-api.void.md)<!-- -->, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> Depends on the output of . Uploads Teams package to AppStudio |
|  [scaffoldSourceCode?](./teamsfx-api.v2.resourceplugin.scaffoldsourcecode.md) | (ctx: [Context](./teamsfx-api.context.md)<!-- -->, inputs: [Inputs](./teamsfx-api.inputs.md)<!-- -->) =&gt; Promise&lt;Result&lt;[Void](./teamsfx-api.void.md)<!-- -->, [FxError](./teamsfx-api.fxerror.md)<!-- -->&gt;&gt; | <i>(Optional)</i> Called by Toolkit when creating a new project or adding a new resource. A resource plugin is expected to scaffold source code or files on disk, relative to context.projectPath. |

## Methods

|  Method | Description |
|  --- | --- |
|  [activate(solutionSettings)](./teamsfx-api.v2.resourceplugin.activate.md) | A resource plugin can decide whether it needs to be activated when the Toolkit initializes based on solution settings. |

